# Netlify Configuration for AVIDFLICK Blog

[build]
# Gridea outputs to the 'public' folder by default
# Adjust if your Gridea is configured differently
command = "echo 'Gridea builds locally - this is for reference'"
publish = "public"

[[redirects]]
# Redirect bare domain to www (optional)
from = "https://avidflick.in/*"
to = "https://avidflick.in/:splat"
status = 200

[[redirects]]
# Redirect old post URLs if changed (optional)
# from = "/old-post-slug"
# to = "/new-post-slug"
# status = 301

[[headers]]
# Add security headers
for = "/*"
[headers.values]
X-Frame-Options = "DENY"
X-Content-Type-Options = "nosniff"
X-XSS-Protection = "1; mode=block"
Referrer-Policy = "no-referrer"

# Cache images for 1 year
[[headers]]
for = "/images/*"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

# Cache CSS/JS for 1 month
[[headers]]
for = "/*.css"
[headers.values]
Cache-Control = "public, max-age=2592000"

[[headers]]
for = "/*.js"
[headers.values]
Cache-Control = "public, max-age=2592000"

# Don't cache HTML (so new posts show up immediately)
[[headers]]
for = "/*.html"
[headers.values]
Cache-Control = "max-age=0, no-cache, no-store"

[context.production]
# Production environment settings
environment = { CONTEXT = "production" }

[context.deploy-preview]
# Deploy preview settings
environment = { CONTEXT = "deploy-preview" }

[context.branch-deploy]
# Branch deploy settings
environment = { CONTEXT = "branch-deploy" }
